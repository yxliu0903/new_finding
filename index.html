<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Discovery</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: white;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .title {
            text-align: center;
            color: #333;
            font-size: 1.5em;
            margin: 10px 0;
            font-weight: bold;
        }

        .discovery-canvas {
            flex: 1;
            position: relative;
            background: white;
            overflow: hidden;
        }

        .base-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: #999;
            opacity: 0.2;
            z-index: 1;
        }

        .architecture-layer {
            position: absolute;
            width: 40%;
            height: 75%;
            opacity: 0;
            transition: all 0.5s ease-in-out;
            z-index: 2;
            border-radius: 0;
            overflow: hidden;
            transform: scale(0.8);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            background: white;
            padding: 0;
            margin: 0;
            border: none;
            box-sizing: border-box;
            line-height: 0;
            font-size: 0;
        }

        .architecture-layer.milestone-highlight {
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            border: 3px solid #ffd700;
            transform: scale(1.1) rotate(0deg);
            z-index: 10;
        }

        .architecture-layer.active {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }

        .architecture-layer.new-finding {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            border: 2px solid #ffd700;
        }

        .new-finding-label {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.8em;
            z-index: 10;
        }







        .milestone {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ff6b6b, #ffd700);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.2em;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
            transition: all 0.5s ease;
            z-index: 100;
            text-align: center;
        }

        .milestone.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* SVGÊ†∑Âºè‰ºòÂåñ */
        .architecture-layer svg {
            width: 100% !important;
            height: 100% !important;
            object-fit: fill;
            display: block !important;
            line-height: 0 !important;
            font-size: 0 !important;
        }
        
        .architecture-layer svg * {
            margin: 0 !important;
            padding: 0 !important;
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="title">üöÄ AI Architecture Discovery</div>
        


        <div class="discovery-canvas" id="discoveryCanvas">
            <div class="base-image">
                <div>üß† AI Foundation</div>
            </div>
        </div>






        <div class="milestone" id="milestone">
            üéâ Move 37 Moment!
        </div>
    </div>

    <script>
        class ArchitectureDiscovery {
            constructor() {
                this.architectures = [];
                this.currentIndex = 0;
                this.isPlaying = false;
                this.newFindingsCount = 0;
                this.milestoneShown = false;
                this.autoPlayInterval = null;
                
                this.init();
            }

            async init() {
                try {
                    console.log('ÂºÄÂßãÂä†ËΩΩÊû∂ÊûÑÊï∞ÊçÆ...');
                    const response = await fetch('data/106.json');
                    console.log('Êï∞ÊçÆÂìçÂ∫îÁä∂ÊÄÅ:', response.status);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    this.architectures = await response.json();
                    console.log('ÊàêÂäüÂä†ËΩΩÊû∂ÊûÑÊï∞ÊçÆÔºåÂÖ±', this.architectures.length, '‰∏™Êù°ÁõÆ');
                    
                    this.updateInfo();
                    this.setupEventListeners();
                    
                    // Ëá™Âä®ÂºÄÂßãÊí≠Êîæ
                    setTimeout(() => {
                        console.log('ÂºÄÂßãËá™Âä®Êí≠Êîæ...');
                        this.startDiscovery();
                    }, 1000);
                } catch (error) {
                    console.error('Error loading architectures:', error);
                    this.showError('Êó†Ê≥ïÂä†ËΩΩÊû∂ÊûÑÊï∞ÊçÆ: ' + error.message);
                }
            }

            setupEventListeners() {
                // ÁßªÈô§ÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºåÂõ†‰∏∫ÊéßÂà∂ÊåâÈíÆÂ∑≤Ë¢´Âà†Èô§
            }

            startDiscovery() {
                if (this.currentIndex >= this.architectures.length) {
                    this.resetDiscovery();
                }
                this.isPlaying = true;
                
                // Ê∏ÖÈô§‰πãÂâçÁöÑÂÆöÊó∂Âô®
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                }
                
                // ËÆæÁΩÆ500msÈó¥ÈöîÁöÑËá™Âä®Êí≠Êîæ
                this.autoPlayInterval = setInterval(() => {
                    if (this.isPlaying) {
                this.showNextArchitecture();
                    }
                }, 500);
            }

            pauseDiscovery() {
                this.isPlaying = false;
                
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
            }

            resetDiscovery() {
                this.currentIndex = 0;
                this.newFindingsCount = 0;
                this.milestoneShown = false;
                this.isPlaying = false;
                this.clearCanvas();
                this.updateInfo();
                
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
            }

            clearCanvas() {
                const canvas = document.getElementById('discoveryCanvas');
                const layers = canvas.querySelectorAll('.architecture-layer');
                layers.forEach(layer => layer.remove());
            }

            showNextArchitecture() {
                console.log('ÊòæÁ§∫Á¨¨', this.currentIndex + 1, '‰∏™Êû∂ÊûÑ');
                
                if (this.currentIndex >= this.architectures.length) {
                    console.log('ÊâÄÊúâÊû∂ÊûÑÂ∑≤ÊòæÁ§∫ÂÆåÊØï');
                    this.completeDiscovery();
                    return;
                }

                const arch = this.architectures[this.currentIndex];
                console.log('ÂΩìÂâçÊû∂ÊûÑ:', arch.name || arch.name_new);
                
                const layer = this.createArchitectureLayer(arch);
                
                // ÈöèÊú∫‰ΩçÁΩÆ
                this.setRandomPosition(layer);
                
                document.getElementById('discoveryCanvas').appendChild(layer);
                
                // Ëß¶ÂèëÂä®Áîª
                setTimeout(() => {
                    layer.classList.add('active');
                }, 50);

                // Ê£ÄÊü•ÊòØÂê¶ÊòØÊñ∞ÂèëÁé∞ÔºàÂàÜÊï∞È´ò‰∫éÂπ≥ÂùáÂÄºÁöÑ1.5ÂÄçÔºâ
                const avgScore = this.getAverageScore();
                if (arch.score > avgScore * 1.5) {
                    this.markAsNewFinding(layer, arch);
                }

                // Ê£ÄÊü•ÈáåÁ®ãÁ¢ë
                if (this.currentIndex === 37 && !this.milestoneShown) {
                    this.showMilestone();
                    // È´ò‰∫ÆÂΩìÂâçÊû∂ÊûÑÂõæ
                    layer.classList.add('milestone-highlight');
                }

                this.currentIndex++;
                this.updateInfo();
                
                // ‰∏çÂÜçÊ∏ÖÁêÜÊóßÁöÑÊû∂ÊûÑÂõæÔºåËÆ©ÂÆÉ‰ª¨Ê∞∏Ëøú‰øùÁïô
                // Ê≥®ÊÑèÔºöËøôÈáåÊ≥®ÈáäÊéâ‰∫ÜÊ∏ÖÁêÜÈÄªËæëÔºåÊû∂ÊûÑÂõæ‰ºö‰∏ÄÁõ¥‰øùÁïôÂú®ÁîªÂ∏É‰∏ä
            }

            createArchitectureLayer(arch) {
                const layer = document.createElement('div');
                layer.className = 'architecture-layer';
                
                // ÂàõÂª∫SVGÂÆπÂô®Âπ∂ËÆæÁΩÆÊ†∑Âºè
                const svgContainer = document.createElement('div');
                svgContainer.innerHTML = arch.svg_picture;
                svgContainer.style.width = '100%';
                svgContainer.style.height = '100%';
                svgContainer.style.display = 'block';
                svgContainer.style.background = 'white';
                svgContainer.style.padding = '0';
                svgContainer.style.margin = '0';
                svgContainer.style.boxSizing = 'border-box';
                svgContainer.style.lineHeight = '0';
                svgContainer.style.fontSize = '0';
                
                // ‰ºòÂåñSVGÂ§ßÂ∞èÂπ∂ÂéªÊéâÁôΩËæπ
                const svg = svgContainer.querySelector('svg');
                if (svg) {
                    svg.style.width = '100%';
                    svg.style.height = '100%';
                    svg.style.maxWidth = '100%';
                    svg.style.maxHeight = '100%';
                    svg.style.background = 'white';
                    svg.style.padding = '0';
                    svg.style.margin = '0';
                    svg.style.border = 'none';
                    svg.style.boxSizing = 'border-box';
                    svg.style.display = 'block';
                    svg.style.lineHeight = '0';
                    svg.style.fontSize = '0';
                    svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                    
                    // Âº∫Âà∂ÁßªÈô§SVGÂÜÖÈÉ®ÁöÑÊâÄÊúâÁ©∫ÁôΩ
                    svg.setAttribute('xml:space', 'preserve');
                    const allElements = svg.querySelectorAll('*');
                    allElements.forEach(el => {
                        if (el.style) {
                            el.style.margin = '0';
                            el.style.padding = '0';
                        }
                    });
                    
                    // Ë∞ÉÊï¥viewBoxÊù•Ë£ÅÂâ™Â∑¶Âè≥ÁôΩËâ≤ËæπË∑ù
                    const viewBox = svg.getAttribute('viewBox');
                    if (viewBox) {
                        const parts = viewBox.split(' ');
                        if (parts.length === 4) {
                            const x = parseFloat(parts[0]);
                            const y = parseFloat(parts[1]);
                            const width = parseFloat(parts[2]) - x;
                            const height = parseFloat(parts[3]) - y;
                            
                            // Âè™Ë£ÅÂâ™Â∑¶Âè≥ËæπË∑ùÔºå‰øùÁïô‰∏ä‰∏ãËæπË∑ù
                            const cropPercent = 0.15; // Ë£ÅÂâ™15%ÁöÑÂ∑¶Âè≥ËæπË∑ù
                            const cropX = width * cropPercent;
                            const newWidth = width - 2 * cropX;
                            
                            svg.setAttribute('viewBox', `${x + cropX} ${y} ${newWidth} ${height}`);
                        }
                    }
                }
                
                layer.appendChild(svgContainer);
                return layer;
            }

            setRandomPosition(layer) {
                const canvas = document.getElementById('discoveryCanvas');
                const canvasRect = canvas.getBoundingClientRect();
                
                // ËÆ°ÁÆóÂèØÁî®Âå∫ÂüüÔºàÂáèÂéªÊû∂ÊûÑÂõæÊú¨Ë∫´ÁöÑÂ∞∫ÂØ∏Ôºâ
                const layerWidth = canvasRect.width * 0.4; // 40%ÂÆΩÂ∫¶
                const layerHeight = canvasRect.height * 0.75; // 75%È´òÂ∫¶
                
                // Á°Æ‰øùÊû∂ÊûÑÂõæ‰∏ç‰ºöË∂ÖÂá∫Â±èÂπïËæπÁïå
                const maxX = Math.max(0, canvasRect.width - layerWidth);
                const maxY = Math.max(0, canvasRect.height - layerHeight);
                
                // ‰ΩøÁî®Êõ¥ÂùáÂåÄÁöÑÂàÜÂ∏ÉÔºåÁ°Æ‰øùÊû∂ÊûÑÂõæÂú®Â±èÂπï‰∏≠Â§Æ
                const gridCols = 3;
                const gridRows = 2;
                const cellWidth = maxX / gridCols;
                const cellHeight = maxY / gridRows;
                
                // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÁΩëÊ†ºÂçïÂÖÉÔºå‰ΩÜÈÅøÂÖçÊúÄÂ∑¶ËæπÁöÑÂàó
                const gridX = Math.floor(Math.random() * (gridCols - 1)) + 1; // ‰ªé1ÂºÄÂßãÔºåÈÅøÂÖçÊúÄÂ∑¶Ëæπ
                const gridY = Math.floor(Math.random() * gridRows);
                
                // Âú®ÁΩëÊ†ºÂçïÂÖÉÂÜÖÈöèÊú∫‰ΩçÁΩÆÔºåÁ°Æ‰øù‰∏çË∂ÖÂá∫ËæπÁïå
                const margin = 15;
                const minX = Math.max(0, gridX * cellWidth + margin);
                const maxCellX = Math.min(maxX - layerWidth, (gridX + 1) * cellWidth - layerWidth - margin);
                const x = minX + Math.random() * Math.max(0, maxCellX - minX);
                
                const minY = Math.max(0, gridY * cellHeight + margin);
                const maxCellY = Math.min(maxY - layerHeight, (gridY + 1) * cellHeight - layerHeight - margin);
                const y = minY + Math.random() * Math.max(0, maxCellY - minY);
                
                // ËÆæÁΩÆ‰ΩçÁΩÆ
                layer.style.left = x + 'px';
                layer.style.top = y + 'px';
                
                // Ê∑ªÂä†ÈöèÊú∫ÊóãËΩ¨ÂíåÁº©ÊîæÂèòÂåñ
                const rotation = (Math.random() - 0.5) * 20; // -10Â∫¶Âà∞+10Â∫¶
                const scale = 0.8 + Math.random() * 0.2; // 0.8Âà∞1.0‰πãÈó¥
                layer.style.transform = `scale(${scale}) rotate(${rotation}deg)`;
            }



            markAsNewFinding(layer, arch) {
                layer.classList.add('new-finding');
                
                const label = document.createElement('div');
                label.className = 'new-finding-label';
                label.textContent = 'NEW FINDINGS!';
                layer.appendChild(label);
                
                this.newFindingsCount++;
            }

            showMilestone() {
                this.milestoneShown = true;
                const milestone = document.getElementById('milestone');
                milestone.classList.add('show');
                
                setTimeout(() => {
                    milestone.classList.remove('show');
                }, 3000);
            }

            getAverageScore() {
                const scores = this.architectures.map(arch => arch.score).filter(score => score !== null && score !== undefined);
                return scores.length > 0 ? scores.reduce((a, b) => a + b, 0) / scores.length : 0;
            }

            updateInfo() {
                // ÁßªÈô§‰ø°ÊÅØÊõ¥Êñ∞ÔºåÂõ†‰∏∫Áõ∏ÂÖ≥ÂÖÉÁ¥†Â∑≤Ë¢´Âà†Èô§
            }

            completeDiscovery() {
                this.isPlaying = false;
                
                if (this.autoPlayInterval) {
                    clearInterval(this.autoPlayInterval);
                    this.autoPlayInterval = null;
                }
                
                // ‰∏çÊòæÁ§∫ÂÆåÊàê‰ø°ÊÅØÔºåÈùôÈªòÂÆåÊàê
            }

            showError(message) {
                alert('ÈîôËØØ: ' + message);
            }
        }

        // ÂàùÂßãÂåñÂ∫îÁî®
        document.addEventListener('DOMContentLoaded', () => {
            new ArchitectureDiscovery();
        });
    </script>
</body>
</html> 